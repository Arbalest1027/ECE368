CFLAGS = -Wall -Werror -O3 -g
GCC = gcc $(CFLAGS)
SRCSH = huff.c
SRCSU = unhuff.c
OBJSH = $(SRCSH:%.c=%.o)
OBJSU = $(SRCSU:%.c=%.o)
VALGRIND = valgrind --tool=memcheck --leak-check=full --verbose --log-file=memcheck.log
huff:$(OBJSH)
	$(GCC) $(OBJSH) -o huff
unhuff:$(OBJSU)
	$(GCC) $(OBJSU) -o unhuff

test1:huff
	./huff 1.txt
test2:unhuff
	./unhuff 1.txt.huff
test3:huff
	./huff 2.txt
test4:unhuff
	./unhuff 2.txt.huff
test5:huff
	./huff simple2.txt
test6:unhuff
	./unhuff simple2.txt.huff
test7:huff
	./huff text3.txt
test8:unhuff
	./unhuff text3.txt.huff
test9:huff
	./huff text4.txt
test10:unhuff
	./unhuff text4.txt.huff

test11:huff
	$(VALGRIND) ./huff 1.txt
test12:unhuff
	$(VALGRIND) ./unhuff 1.txt.huff
test13:huff
	$(VALGRIND) ./huff 2.txt
test14:unhuff
	$(VALGRIND) ./unhuff 2.txt.huff
test15:huff
	$(VALGRIND) ./huff simple2.txt
test16:unhuff
	$(VALGRIND) ./unhuff simple2.txt.huff
test17:huff
	$(VALGRIND) ./huff text3.txt
test18:unhuff
	$(VALGRIND) ./unhuff text3.txt.huff
test19:huff
	$(VALGRIND) ./huff text4.txt
test20:unhuff
	$(VALGRIND) ./unhuff text4.txt.huff

test101:huff
	./huff simple1.txt > testout.txt
test102:huff
	./huff simple2.txt > testout.txt
test103:huff
	./huff test1.txt > testout.txt

clean:
	/bin/rm -f huff unhuff *.o *.txt.huff *.txt.huff.unhuff *.log
